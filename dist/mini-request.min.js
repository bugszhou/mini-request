!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).appletsRequest={})}(this,(function(e){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))}function r(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var o=function(){function e(e){this.message="",this.isCancel=!0,this.message=e}return e.prototype.toString=function(){return"Cancel: "+(this.message||"")},e}(),i=function(){function e(e){var t=this;this.promise=new Promise((function(e){t.promiseResolve=e})),"function"==typeof e&&e(this.cancel.bind(this))}return e.source=function(){var t;return{token:new e((function(e){t=e})),cancel:t}},e.prototype.cancel=function(e){this.reason||(this.reason=new o(e),this.promiseResolve(this.reason))},e.prototype.subscribeCancelEvent=function(e){return this.promise.then(e)},e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e}();function s(e){return Object.prototype.toString.call(e)}function u(e){if(null===e||"[object Object]"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function a(e){return void 0===e}function c(e,t){if(null!=e){var n=e;"object"!=typeof e&&(n=[e]),Array.isArray(n)?n.forEach((function(n,r){t.call(null,n,r,e)})):Object.keys(n).forEach((function(e){t.call(null,n[e],e,n)}))}}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return Object.create(null);var n=Object.create(null);function r(e,t){u(n[t])&&u(e)?n[t]=f(n[t],e):u(e)?n[t]=f({},e):Array.isArray(e)?n[t]=f(e):n[t]=e}return n=Array.isArray(e[0])?[]:Object.create(null),e.forEach((function(e){c(e,r)})),n}function l(e){return"string"==typeof e}function p(e){return"function"==typeof e}function h(e){return!a(e)&&(e&&e.isCancel)}function d(e){return e&&"string"==typeof e?e.toUpperCase():"GET"}var y=function(){function e(e){this.reqConfig=this.copyAdapterConfig(e)}return e.prototype.resolve=function(e,t){(a(e)||null===e)&&t({headers:{},status:200,data:{},config:this.reqConfig,originalRes:null}),t({headers:e.headers,config:this.reqConfig,data:e.data,status:e.status,originalRes:a(e.response)?null:e.response})},e.prototype.reject=function(e,t){(a(e)||null===e)&&t({headers:null,status:"NETWORK_ERROR",errMsg:"Reject arguments Error",data:null,config:this.reqConfig,response:null,extra:null}),t({status:e.status,errMsg:e.errMsg,config:this.reqConfig,headers:e.headers||{},data:e.data,response:a(e.response)?null:e.response,extra:a(e.extra)?null:e.extra})},e.prototype.subscribeCancelEvent=function(e){if(this.reqConfig.cancelToken)return this.reqConfig.cancelToken.subscribeCancelEvent(e)},e.prototype.copyAdapterConfig=function(e){if(a(e)||null===e)return{};var t=f({},e);return delete t.Adapter,t},e}();function v(e){var n=new y(t({method:d(e.method)},e));return new Promise((function(e){console.log("defaultAdapter: ","Pls set adapter!!! Don't use default adapter"),n.resolve({data:{},headers:{},status:404,response:null},e)}))}function g(e,t){t&&c(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}var m="miniRequest:cookies";function C(){var e;return{adapter:v,method:"GET",timeout:1e4,headers:t({common:{Accept:"application/json, text/plain, */*"}},(e={},["delete","get","head","options"].forEach((function(t){e[t]={}})),["post","put","patch"].forEach((function(t){e[t]={"Content-Type":"application/json; charset=utf-8"}})),e)),transformConfig:[],transformRequest:[function(e,t){return g(t,"Accept"),g(t,"Content-Type"),u(e)&&function(e,t){!a(e)&&e&&a(e["Content-Type"])&&(e["Content-Type"]=t)}(t,"application/json; charset=utf-8"),e}],transformResponse:[],xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",validateStatus:function(e){return e>=200&&e<300}}}function b(e){return!a(e)&&null!==e&&"NETWORK_ERROR"===e.status}function R(e){return!a(e)&&null!==e&&"TIMEOUT"===e.status}function E(e,t){var n=e||"",r=t||"";return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n}function j(e){return/^([a-z][a-z\d+-.]*:)?\/\//i.test(e||"")}function k(e,t,n){var r=O(e);if("string"==typeof t)return T(r,t);var o,i=Object.keys(null===(o=t)||"object"!=typeof o?{}:t);if(0===i.length&&!p(n))return r;var a=p(n)?null==n?void 0:n(t):function(e,t){var n=e.filter((function(e){return function(e){if(null==e)return!1;return!0}(t[e])})).map((function(e){return function(e,t){if(Array.isArray(t))return function(e,t){var n=t.map((function(t,n){return 0===n?t:q(e+"[]")+"="+q(t)}));return[q(e+"[]"),n.join("&")]}(e,t);if(function(e){return"[object Date]"===s(e)}(t))return[q(e),q(t.toISOString())];if(u(t))return[q(e),q(JSON.stringify(t))];return[e,t]}(e,t[e])}));if(0===n.length)return"";return n.reduce((function(e,t){return t[0]&&t[1]?(e?e+"&":"")+t.join("="):e}),"")}(i,t);return a?T(r,a):r}function T(e,t){return e.includes("?")?e+"&"+t:e+"?"+t}function O(e){return e.includes("#")?e.slice(0,e.indexOf("#")):e}function q(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function w(e,t,n){return e?k(e,t,n):O(e)}function x(e){return!!a(e)||!!p(e)}var S=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){var n={fulfilled:x(e)?e:void 0,rejected:x(t)?t:void 0};return this.interceptors.push(n),this.interceptors.length-1},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e.prototype.forEach=function(e){this.interceptors.forEach((function(t,n){"function"==typeof e&&null!==t&&e(t,n)}))},e.prototype.size=function(){return this.interceptors.length},e}();function A(e,t){var n=t||{},r=Object.create(null),o=["url","method","data"],i=["headers","params"],s=["validateStatus","writeCookies","readCookies"];function l(t){var o=e[t],i=n[t];a(i)?a(o)||(r[t]=p(void 0,o)):r[t]=p(o,i)}function p(e,t){return u(e)&&u(t)?f(e,t):u(t)?f({},t):h(t)}function h(e){return Array.isArray(e)||u(e)?f(e):e}o.forEach((function(e){var t=n[e];if(a(t))return;r[e]=h(t)})),["baseURL","transformConfig","transformRequest","transformResponse","paramsSerializer","timeout","adapter","responseType","xsrfCookieName","xsrfHeaderName","cancelToken"].forEach((function(t){var o=n[t];if(!a(o))return void(r[t]=h(o));a(e[t])||(r[t]=h(e[t]))})),s.forEach((function(t){if(t in n)return void(r[t]=h(n[t]));t in e&&(r[t]=h(e[t]))})),i.forEach(l);var d=o.concat(i).concat(s).concat(i);return c(Object.keys(e).concat(Object.keys(n)).filter((function(e){return!d.includes(e)})),l),r}function P(e,t){var n={};if(!u(e))return n;if(0===t.length)return e;var r={};return t.forEach((function(e){r[e.toUpperCase()]=e})),Object.keys(e).forEach((function(t){var o=t.toUpperCase(),i=r[o];n[i||t]=e[t]})),n}function N(e,t){if(!e)return{};var n=f(e.common,e[t.toLowerCase()],e);return["delete","get","post","head","patch","put","options","common"].forEach((function(e){delete n[e]})),n}function M(e,t){return t||"0"===String(t)?e+"="+t:e}function U(e,t){var n=e;return c(t,(function(e){"function"==typeof e&&(n=e(n))})),function(e){return e?Array.isArray(e)?f([],e):f({},e):{}}(n)}function W(e,t,n){var r=e;return c(n,(function(e){"function"==typeof e&&(r=e(r,t))})),r}function D(e){return e&&p(e.readCookies)?e.readCookies(m):{}}function I(e,t){if(!e||!t)return"";var n=e[t];return a(n)||null===n?"":e[t]}var z=decodeURIComponent,_=/; */;function K(e,t){return void 0===t&&(t={}),e?function(e,t){void 0===t&&(t={});if("string"!=typeof e)return{};var n={},r=e.split(_),o=t.decode||z;return r.forEach((function(e){var t=e.indexOf("=");if(!(t<0)){var r=e.substr(0,t).trim(),i=e.substr(t+1,e.length).trim();'"'===i[0]&&(i=i.slice(1,-1)),a(n[r])&&(n[r]=function(e,t){try{return t(e)}catch(t){return e}}(i,o))}})),n}(e,t):{}}var L=function(e,t,n,r,o){this.extra=null,this.errMsg=e,this.config=t,this.status=n,this.response=r,this.extra=o};function G(e,t,n,r,o){return new L(e,t,n||0===n?n:"NETWORK_ERROR",r,o)}function H(e){return n(this,void 0,void 0,(function(){var n,o,i,s;return r(this,(function(r){switch(r.label){case 0:n=function(e){X(e);var n=e.baseURL,r=e.url,o=e.params,i=w(j(r)?r:E(n,r),o,e.paramsSerializer),s=d(e.method),a=t(t({},e),{headers:N(e.headers,s)});a.data=W(a.data,a.headers,a.transformRequest),a.headers=(c=a.headers,f=a.data,p=P(Object.assign(c||{}),["Content-Type"]),u(f)&&!p["Content-Type"]&&(p["Content-Type"]="application/json; charset=utf-8"),null==f&&delete p["Content-Type"],p);var c,f,p;var h=function(e){return e.withCredentials,t=e.headers.Cookies,n=e.xsrfCookieName,r=I(D(e),e.xsrfCookieName),n||String(n)===String(0)?l(t)?t+"; "+M(n,r):r||"0"===String(r)?""+M(n,r):n:t;var t,n,r;return""}(a=U(a,e.transformConfig));h&&(a.headers.Cookies=h);var v=I(D(e),a.xsrfCookieName);v&&(a.headers[a.xsrfHeaderName]=v);return t(t({},a),{url:i,method:s,headers:a.headers,getRequestTask:F(a.getRequestTask),Adapter:y})}(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.adapter(n)];case 2:return o=r.sent(),X(n),u(o.headers)&&(o.cookies=K(P(o.headers,["Set-Cookie"])["Set-Cookie"])),function(e,t){e.autoCookies&&p(e.writeCookies)&&e.writeCookies(m,t)}(e,o.cookies),"function"==typeof e.validateStatus&&e.validateStatus(o.status)?(o.data=W(o.data,o.headers,n.transformResponse),[2,o]):[2,Promise.reject(G("Request failed with status code "+o.status,o.config,o.status,o))];case 3:return h(i=r.sent())?[2,Promise.reject(i)]:(X(n),(s=i)&&s.response&&(s.response.data=W(s.response.data,s.response.headers,n.transformResponse)),s instanceof TypeError?[2,Promise.reject(G(s.message,s.config,"SCRIPT_ERROR",s.response,s))]:[2,Promise.reject(G(s.errMsg,s.config,s.status,s.response,s.extra))]);case 4:return[2]}}))}))}function X(e){e.cancelToken&&e.cancelToken.throwIfRequested()}function F(e){return"function"==typeof e?e:function(){}}var $=function(){function e(t){this.AppletsRequest=e,this.CancelToken=i,this.defaults={},this.isCancel=h,this.isTimeout=R,this.isNetworkError=b,t&&(this.defaults=t),this.interceptors={request:new S,response:new S}}return e.prototype.request=function(e,t){var n={};"string"==typeof e?(n=this.transformConfig(t)).url=e:n=e,n=A(this.defaults,n);var r=[{fulfilled:H,rejected:void 0}];this.interceptors.request.forEach((function(e){return r.unshift(e)})),this.interceptors.response.forEach((function(e){return r.push(e)}));var o=Promise.resolve(n);return r.forEach((function(e){e&&(o=o.then(e.fulfilled,e.rejected))})),o},e.prototype.get=function(e,t){return this.requestWithMethod(e,"GET",t)},e.prototype.delete=function(e,t){return this.requestWithMethod(e,"DELETE",t)},e.prototype.head=function(e,t){return this.requestWithMethod(e,"HEAD",t)},e.prototype.options=function(e,t){return this.requestWithMethod(e,"OPTIONS",t)},e.prototype.post=function(e,t,n){return this.requestWithData(e,"POST",t,n)},e.prototype.put=function(e,t,n){return this.requestWithData(e,"PUT",t,n)},e.prototype.create=function(t){var n=new e(A(C(),t));return function(e,t){if(l(t))return e;for(var n in t)e[n]=t[n];return e}(e.prototype.request.bind(n),n)},e.prototype.all=function(e){if(0===e.length)throw new TypeError("arguments length is 0");return Promise.all(e)},e.prototype.getUri=function(e){var t=e.url,n=e.baseURL,r=e.params,o=t||"";return w(j(o)?o:E(n||"",o),r,e.paramsSerializer)},e.prototype.requestWithMethod=function(e,n,r){return this.request(t(t({},this.transformConfig(r)),{url:e,method:n}))},e.prototype.requestWithData=function(e,n,r,o){return this.requestWithMethod(e,n,t(t({},this.transformConfig(o)),{data:r}))},e.prototype.transformConfig=function(e){return u(e)?e:{}},e}();function B(e){return new $(e).create(e)}var J=B();e.AppletsRequest=$,e.createAppletsRequestInstance=B,e.default=J,e.getDefaults=C,Object.defineProperty(e,"__esModule",{value:!0})}));//# sourceMappingURL=mini-request.min.js.map
