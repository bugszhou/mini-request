{"version":3,"file":"mini-request.es.js","sources":["../src/cancel/Cancel.ts","../src/cancel/CancelToken.ts","../src/helpers/utils.ts","../src/cancel/isCancel.ts","../src/adapters/wx/configAdapter.ts","../src/adapters/wx/weappRequest.ts","../src/adapters/index.ts","../src/helpers/normalizeHeaderName.ts","../src/helpers/setContentTypeIfUnset.ts","../src/defaults.ts","../src/error/isNetworkError.ts","../src/error/isTimeout.ts","../src/helpers/combineURLs.ts","../src/helpers/isAbsoluteURL.ts","../src/helpers/transformUrl.ts","../src/core/InterceptorManager.ts","../src/core/mergeConfig.ts","../src/adapters/wx/storageCookies.ts","../src/helpers/assembleHeaders.ts","../src/helpers/transformMethod.ts","../src/helpers/copyConfig.ts","../src/core/transformConfig.ts","../src/core/transformData.ts","../src/helpers/isURLSameOrigin.ts","../src/helpers/parseCookie.ts","../src/core/AppletsRequestError.ts","../src/adapters/Adapter.ts","../src/core/request.ts","../src/core/AppletsRequest.ts","../src/appletsRequest.ts"],"sourcesContent":["export default class Cancel {\n  message = \"\";\n\n  isCancel = true;\n\n  constructor(message: string) {\n    this.message = message;\n  }\n\n  toString(): string {\n    return `Cancel: ${this.message || \"\"}`;\n  }\n}\n","import Cancel from \"./Cancel\";\n\ninterface ISourceReturn {\n  token: CancelToken;\n  cancel: CancelToken[\"cancel\"];\n}\n\nexport default class CancelToken {\n  private reason: Cancel | undefined;\n\n  private promise: Promise<string>;\n\n  private promiseResolve: IAppletsRequest.IResolved<any> = (): any => {\n    // empty\n  };\n\n  static source(): ISourceReturn {\n    let cancel = (): void => {\n      // empty\n    };\n    const token = new CancelToken((cancelFn) => {\n      cancel = cancelFn;\n    });\n    return {\n      token,\n      cancel,\n    };\n  }\n\n  constructor(executor?: IAppletsRequest.IEmptyFN) {\n    this.promise = new Promise((resolve) => {\n      this.promiseResolve = resolve;\n    });\n\n    if (typeof executor === \"function\") {\n      executor(this.cancel.bind(this));\n    }\n  }\n\n  cancel(message: string): void {\n    if (this.reason) {\n      return;\n    }\n    this.reason = new Cancel(message);\n    this.promiseResolve(this.reason);\n  }\n\n  execAbort(resolution: IAppletsRequest.IResolved<any>): any {\n    return this.promise.then(resolution);\n  }\n\n  throwIfRequested(): void {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n}\n","function getDataType(val: any): string {\n  return Object.prototype.toString.call(val);\n}\n\nexport function isDate(val: any): val is Date {\n  return getDataType(val) === \"[object Date]\";\n}\n\nexport function isObject(val: any): val is Record<string, any> {\n  return val !== null && typeof val === \"object\";\n}\n\nexport function isPlainObject(val: any): val is Record<string, any> {\n  if (val === null || getDataType(val) !== \"[object Object]\") {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\nexport function assign<T, U>(to: T, from: U): T & U {\n  if (isString(from)) {\n    return to as T & U;\n  }\n\n  for (const key in from) {\n    (to as T & U)[key] = from[key] as any;\n  }\n\n  return to as T & U;\n}\n\nexport function isUndefined(val: any): boolean {\n  return typeof val === \"undefined\";\n}\n\n/**\n * 遍历\n * @param {Object|Array} obj\n * @param fn\n */\nexport function forEach(obj: any, fn: IAppletsRequest.IEmptyFN): void {\n  if (typeof obj === \"undefined\" || obj === null) {\n    return;\n  }\n\n  let arr = obj;\n\n  // 如果obj是非object类型，例如：number，string等\n  if (typeof obj !== \"object\") {\n    arr = [obj];\n  }\n\n  if (Array.isArray(arr)) {\n    arr.forEach((item, i) => {\n      fn.call(null, item, i, obj);\n    });\n    return;\n  }\n  Object.keys(arr).forEach((key) => {\n    fn.call(null, arr[key], key, arr);\n  });\n}\n\nexport function merge(\n  ...objs: Record<string, any>[]\n): any[] | Record<string, any> {\n  if (objs.length === 0) {\n    return Object.create(null);\n  }\n\n  let result: any = Object.create(null);\n  function assignValue(val: any, key: string | number): void {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (Array.isArray(val)) {\n      result[key] = merge(val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  if (Array.isArray(objs[0])) {\n    result = [];\n  } else {\n    result = Object.create(null);\n  }\n\n  objs.forEach((obj) => {\n    forEach(obj, assignValue);\n  });\n\n  return result;\n}\n\nexport function isNumber(val: any): boolean {\n  return typeof val === \"number\";\n}\n\nexport function isString(val: any): boolean {\n  return typeof val === \"string\";\n}\n\nexport function isFunction(val: any): boolean {\n  return typeof val === \"function\";\n}\n","import { isUndefined } from \"../helpers/utils\";\n\nexport default function isCancel(canceler: any): boolean {\n  if (isUndefined(canceler)) {\n    return false;\n  }\n  return canceler && canceler.isCancel;\n}\n","export default function configAdapter(\n  config: IAppletsRequest.IHttpConfig\n): IAppletsRequestWx.RequestOption {\n  const reqConfig: IAppletsRequestWx.RequestOption = {\n    url: config.url || \"\",\n    method: config.method,\n    data: config.data,\n    header: config.headers,\n    dataType: \"json\",\n    timeout: config.timeout,\n  };\n\n  const dataType = config.dataType || \"json\";\n  reqConfig.dataType = dataType;\n\n  if (config.responseType && config.responseType !== \"json\") {\n    reqConfig.dataType = \"其他\";\n  }\n  return reqConfig;\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-04 16:09:10\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-09 17:27:51\n * @Description request adapter\n *\n * 1. 执行成功需要返回IAppletsRequestResponse，执行失败即为reject返回IAppletsRequestAdapterError\n * 2. 如果取消返回IAppletsRequest.ICanceler\n */\n\nimport { isUndefined, merge } from \"../../helpers/utils\";\nimport configAdapter from \"./configAdapter\";\n\ninterface IResolveOptions {\n  headers: Record<string, any>;\n  status: number;\n  data: any;\n  response?: any;\n}\n\nexport default function weappRequest(\n  config: IAppletsRequest.IHttpConfig,\n): IAppletsRequestPromise {\n  function requestSuccess(res: any): IResolveOptions {\n    if (isUndefined(res) || res === null) {\n      return {\n        headers: {},\n        status: 200,\n        data: {},\n        response: res,\n      };\n    }\n\n    return {\n      headers: res.header,\n      status: res.statusCode,\n      data: dataParser(res.data),\n      response: res,\n    };\n  }\n\n  /**\n   * 获取错误类型\n   * @param err\n   * @param timeout\n   * @returns NETWORK_ERROR | TIMEOUT\n   * @example {\n   *    msg: `Timeout of 2000 ms exceeded`,\n   *    type: \"TIMEOUT\",\n   *  }\n   */\n  function failType(\n    err: any,\n    timeout: number | undefined,\n  ): { msg: string; type: \"NETWORK_ERROR\" | \"TIMEOUT\" } {\n    if (\n      err &&\n      (err.errMsg || \"\").toString().toLowerCase().includes(\"timeout\")\n    ) {\n      return {\n        msg: `Timeout of ${timeout || \"\"} ms exceeded`,\n        type: \"TIMEOUT\",\n      };\n    }\n    return {\n      msg: `Network Error`,\n      type: \"NETWORK_ERROR\",\n    };\n  }\n\n  /**\n   * JSON parse data\n   * @param data\n   */\n  function dataParser(data: any): any {\n    if (typeof data !== \"string\") {\n      return data;\n    }\n    try {\n      return JSON.parse(data);\n    } catch (e) {\n      return data;\n    }\n  }\n\n  function getReqConfig(\n    originalConfig: IAppletsRequestWx.RequestOption,\n  ): IAppletsRequest.IHttpConfig {\n    const tmpConfig: any = merge({}, originalConfig);\n    tmpConfig.headers = originalConfig.header;\n    delete tmpConfig.header;\n    delete tmpConfig.Adapter;\n    return tmpConfig;\n  }\n\n  return new Promise((resolve, reject) => {\n    const Adapter = config.Adapter;\n    const reqConfig = configAdapter(config);\n    const adapterConfig = getReqConfig(reqConfig);\n\n    if (!Adapter) {\n      throw new TypeError(\"Adapter is undefined or null\");\n    }\n\n    const adapter = new Adapter(adapterConfig);\n\n    let request = wx.request({\n      ...reqConfig,\n      success(res: any) {\n        adapter.resolve(requestSuccess(res), resolve);\n      },\n      fail(err: any) {\n        const errData = failType(err, reqConfig.timeout);\n        const rejectData = {\n          errMsg: errData.msg,\n          status: errData.type,\n          extra: err,\n        };\n\n        adapter.reject(rejectData, reject);\n      },\n      complete() {\n        request = null;\n      },\n    });\n\n    adapter.cancel((reason) => {\n      reject(reason);\n      request.abort();\n      request = null;\n    });\n\n    if (typeof config.getRequestTask === \"function\") {\n      config.getRequestTask(request);\n    }\n  });\n}\n","import { isFunction, isUndefined } from \"../helpers/utils\";\nimport wxRequest from \"./wx/weappRequest\";\n\nexport type IAdapterFn = (config: IAppletsRequestConfig) => IAppletsRequestPromise;\n\nexport default function getDefaultAdapter(): IAdapterFn {\n  if (!isUndefined(wx) && isFunction(wx.request)) {\n    return wxRequest as IAdapterFn;\n  }\n  return Promise.resolve;\n}\n","import { forEach } from \"./utils\";\n\nexport default function normalizeHeaderName(\n  headers: any,\n  normalizedHeaderName: string\n) {\n  if (!normalizedHeaderName) {\n    return;\n  }\n  forEach(headers, (headerValue, headerName: string) => {\n    if (\n      headerName !== normalizedHeaderName &&\n      headerName.toUpperCase() === normalizedHeaderName.toUpperCase()\n    ) {\n      headers[normalizedHeaderName] = headerValue;\n      delete headers[headerName];\n    }\n  });\n}\n","import { isUndefined } from \"./utils\";\n\nexport default function setContentTypeIfUnset(\n  headers: any,\n  value: string\n): void {\n  if (\n    !isUndefined(headers) &&\n    headers &&\n    isUndefined(headers[\"Content-Type\"])\n  ) {\n    headers[\"Content-Type\"] = value;\n  }\n}\n","import getDefaultAdapter from \"./adapters\";\nimport normalizeHeaderName from \"./helpers/normalizeHeaderName\";\nimport setContentTypeIfUnset from \"./helpers/setContentTypeIfUnset\";\nimport { isPlainObject } from \"./helpers/utils\";\n\nconst DEFAULT_CONTENT_TYPE = \"application/x-www-form-urlencoded\";\n\nconst defaults: IAppletsRequestConfig = {\n  adapter: getDefaultAdapter(),\n\n  method: \"GET\",\n\n  timeout: 10000,\n\n  headers: {\n    common: {\n      Accept: \"application/json, text/plain, */*\",\n    },\n    ...getDefaultHeaders(),\n  },\n\n  transformConfig: [],\n\n  transformRequest: [\n    (data, headers): IAppletsRequest.IDataType => {\n      normalizeHeaderName(headers, \"Accept\");\n      normalizeHeaderName(headers, \"Content-Type\");\n\n      if (isPlainObject(data)) {\n        setContentTypeIfUnset(headers, \"application/json; charset=utf-8\");\n      }\n      return data;\n    },\n  ],\n\n  transformResponse: [],\n\n  xsrfCookieName: \"XSRF-TOKEN\",\n  xsrfHeaderName: \"X-XSRF-TOKEN\",\n\n  validateStatus(status): boolean {\n    if (status >= 200 && status < 300) {\n      return true;\n    }\n\n    return false;\n  },\n};\n\nfunction getDefaultHeaders(): any {\n  const headers: any = {};\n  [\"delete\", \"get\", \"head\", \"options\"].forEach((method) => {\n    headers[method] = {};\n  });\n  [\"post\", \"put\", \"patch\"].forEach((method) => {\n    headers[method] = {\n      \"Content-Type\": DEFAULT_CONTENT_TYPE,\n    };\n  });\n\n  return headers;\n}\n\nexport default defaults;\n","import { isUndefined } from \"../helpers/utils\";\n\n/**\n * 根据response.status的值来判断是不是NETWORK_ERROR(网络错误)，如：请求不可用等\n * @param response 任何类型的响应数据\n * @example\n * // return true\n * isNetworkError({status: \"NETWORK_ERROR\"});\n * // return false\n * isNetworkError({status: \"TIMEOUT\"});\n * // return false\n * isNetworkError({});\n * @returns true or false\n *\n */\nexport default function isNetworkError(response: any): boolean {\n  if (isUndefined(response) || response === null) {\n    return false;\n  }\n  return response.status === \"NETWORK_ERROR\";\n}\n","import { isUndefined } from \"../helpers/utils\";\n\n/**\n * 根据response.status的值来判断是不是TIMEOUT(超时)\n * @param response 任何类型的响应数据\n * @example\n * // return true\n * isTimeout({status: \"TIMEOUT\"});\n * // return false\n * isTimeout({status: \"NETWORK_ERROR\"});\n * // return false\n * isTimeout({});\n * @returns true or false\n *\n */\nexport default function isTimeout(response: any): boolean {\n  if (isUndefined(response) || response === null) {\n    return false;\n  }\n  return response.status === \"TIMEOUT\";\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-08 13:43:58\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-08 13:49:22\n * @Description 将baseURL和relativeURL组合成完整的URL\n */\n\n/**\n * 将baseURL和relativeURL组合成完整的URL\n * @param baseURL defaults中配置的baseURL\n * @param relativeURL 请求的相对URL\n * @example\n * // returns https://xxx.com/api/login\n * combineURLs(\"https://xxx.com\", \"/api/login\")\n * @returns {string} Returns baseURL and relativeURL are spliced together\n */\nexport default function combineURLs(\n  baseURL: string | undefined,\n  relativeURL: string | undefined\n): string {\n  const tmpBaseURL = baseURL || \"\";\n  const tmpRelativeURL = relativeURL || \"\";\n\n  return tmpRelativeURL\n    ? `${tmpBaseURL.replace(/\\/+$/, \"\")}/${tmpRelativeURL.replace(/^\\/+/, \"\")}`\n    : tmpBaseURL;\n}\n","export default function isAbsoluteURL(url: string | undefined): boolean {\n  return /^([a-z][a-z\\d+-.]*:)?\\/\\//i.test(url || \"\");\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-01-30 16:44:44\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-07 12:29:11\n * @Description 处理url，将params数据，以query的方式拼接到url上，\n * @example /demo?p1=12&p2=34\n *\n * 需要处理的逻辑有：\n * 1. 丢弃URL中哈希#部分\n * 2. 忽略null和undefined的数据\n * 3. 参数值为数组\n * 4. 参数值为对象\n * 5. 参数值为Date类型\n * 6. 可以出现在URL中的特殊字符\n * 7. 保留url中的参数\n */\n\nimport { isDate, isFunction, isObject, isPlainObject } from \"./utils\";\n\n/**\n * @returns [key, val]\n */\nexport type IParamsEntries = [string, string];\n\nfunction parseUrl(\n  url: string,\n  params: string | { [key: string]: any },\n  paramsSerializer?: IAppletsRequest.IEmptyFN\n): string {\n  const tmpUrl = removeHash(url);\n\n  if (typeof params === \"string\") {\n    return assembleUrl(tmpUrl, params);\n  }\n\n  const paramsKeys = Object.keys(!isObject(params) ? {} : params);\n\n  if (paramsKeys.length === 0 && !isFunction(paramsSerializer)) {\n    return tmpUrl;\n  }\n\n  const queryStr = isFunction(paramsSerializer)\n    ? paramsSerializer?.(params)\n    : parseQueryStr(paramsKeys, params);\n\n  if (!queryStr) {\n    return tmpUrl;\n  }\n\n  return assembleUrl(tmpUrl, queryStr);\n}\n\nfunction assembleUrl(url: string, queryStr: string): string {\n  return url.includes(\"?\") ? `${url}&${queryStr}` : `${url}?${queryStr}`;\n}\n\n/**\n * 移除值为null和undefined的属性\n * @param val params中的value\n */\nfunction removeNullAndUndefinedVal(val: any): boolean {\n  if (val === null || typeof val === \"undefined\") {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * 获取query str\n * @param paramsKeys string[]\n * @param params object\n * @returns demo=234&demo1=demo\n */\nfunction parseQueryStr(paramsKeys: string[], params: any): string {\n  const paramsEntries: IParamsEntries[] = paramsKeys\n    .filter((paramsKey) => removeNullAndUndefinedVal(params[paramsKey]))\n    .map((paramKey) => parseParam(paramKey, params[paramKey]));\n\n  if (paramsEntries.length === 0) {\n    return \"\";\n  }\n\n  return paramsEntries.reduce((preStr, curParam): string => {\n    if (!curParam[0] || !curParam[1]) {\n      return preStr;\n    }\n\n    return `${preStr ? `${preStr}&` : \"\"}${curParam.join(\"=\")}`;\n  }, \"\");\n}\n\nfunction parseParam(key: string, val: any): IParamsEntries {\n  if (Array.isArray(val)) {\n    return parseArrayVal(key, val);\n  }\n\n  if (isDate(val)) {\n    return [encode(key), encode(val.toISOString())];\n  }\n\n  if (isPlainObject(val)) {\n    return [encode(key), encode(JSON.stringify(val))];\n  }\n\n  return [key, val];\n}\n\n/**\n * 处理参数值类型为数组的参数\n * @param key 参数名\n * @param val 参数值\n * @returns [key, ${val[0]}&${key}[]=${val[1]}&....&${key}[]=${val[n]}]\n */\nfunction parseArrayVal(key: string, val: any[]): IParamsEntries {\n  const values = val.map((item, i) => {\n    if (i === 0) {\n      return item;\n    }\n    return `${encode(`${key}[]`)}=${encode(item)}`;\n  });\n  return [encode(`${key}[]`), values.join(\"&\")];\n}\n\nfunction removeHash(url: string): string {\n  return url.includes(\"#\") ? url.slice(0, url.indexOf(\"#\")) : url;\n}\n\nfunction encode(str: string): string {\n  return encodeURIComponent(str)\n    .replace(/%40/g, \"@\")\n    .replace(/%3A/gi, \":\")\n    .replace(/%24/g, \"$\")\n    .replace(/%2C/gi, \",\")\n    .replace(/%20/g, \"+\")\n    .replace(/%5B/gi, \"[\")\n    .replace(/%5D/gi, \"]\");\n}\n\nexport default function transformUrl(\n  url: string,\n  params?: any,\n  paramsSerializer?: IAppletsRequest.IEmptyFN\n): string {\n  if (!url) {\n    return removeHash(url);\n  }\n  return parseUrl(url, params, paramsSerializer);\n}\n","interface IInterceptor<T> {\n  fulfilled: IAppletsRequest.IResolved<T>;\n  rejected: IAppletsRequest.IRejected | undefined;\n}\n\nexport default class InterceptorManager<T> {\n  private interceptors: (IInterceptor<T> | null)[];\n\n  constructor() {\n    this.interceptors = [];\n  }\n\n  use(\n    fulfilled: IAppletsRequest.IResolved<T>,\n    rejected?: IAppletsRequest.IRejected,\n  ): IAppletsRequest.IInterceptorId {\n    this.interceptors.push({\n      fulfilled,\n      rejected,\n    });\n\n    return this.interceptors.length - 1;\n  }\n\n  eject(interceptorId: IAppletsRequest.IInterceptorId): void {\n    if (!this.interceptors[interceptorId]) {\n      return;\n    }\n    this.interceptors[interceptorId] = null;\n  }\n\n  forEach(fn: (interceptor: IInterceptor<T>) => void): void {\n    this.interceptors.forEach((interceptor) => {\n      if (typeof fn === \"function\" && interceptor !== null) {\n        fn(interceptor);\n      }\n    });\n  }\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-01 22:55:50\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-02 19:14:16\n * @Description 合并config\n */\n\nimport { forEach, isPlainObject, isUndefined, merge } from \"../helpers/utils\";\n\nexport default function mergeConfig(\n  config1: IAppletsRequestConfig,\n  optionalConfig2?: IAppletsRequestConfig\n): IAppletsRequestConfig {\n  const config2 = optionalConfig2 || {};\n\n  const config = Object.create(null);\n\n  // 只从config2获取值\n  const valueFromConfig2Keys = [\"url\", \"method\", \"data\"];\n\n  // 需要config1和config2中需要深合并的值\n  const requiredMergeDeepPropertiesKeys = [\"headers\", \"params\"];\n\n  // 只要在config2中存在key，就赋值config2[key]，不考虑null和undefined；\n  // 如果config2中不存在key，config1中存在该key，就赋值config1[key]；\n  // config1和config2都不存在，则跳过\n  const directMergeKeys = [\"validateStatus\"];\n\n  // 优先从config2中取值，config2中没有值的，再从config1取值\n  const config2FirstConfig1DefaultKeys = [\n    \"baseURL\",\n    \"transformConfig\",\n    \"transformRequest\",\n    \"transformResponse\",\n    \"paramsSerializer\",\n    \"timeout\",\n    \"adapter\",\n    \"responseType\",\n    \"xsrfCookieName\",\n    \"xsrfHeaderName\",\n    \"cancelToken\",\n  ];\n\n  valueFromConfig2Keys.forEach(getValueFromConfig2);\n\n  config2FirstConfig1DefaultKeys.forEach(getValueFromConfig2First);\n\n  directMergeKeys.forEach(getDirectValue);\n\n  requiredMergeDeepPropertiesKeys.forEach(deepMergeConfig);\n\n  /**\n   * 只从config2获取值\n   * @param key\n   */\n  function getValueFromConfig2(key: string): void {\n    const val = config2[key];\n    if (isUndefined(val)) {\n      return;\n    }\n    config[key] = mergeObject(val);\n  }\n\n  /**\n   * 优先从config2中取值，config2中没有值的，再从config1取值\n   * @param key\n   */\n  function getValueFromConfig2First(key: string): void {\n    const val = config2[key];\n    if (!isUndefined(val)) {\n      config[key] = mergeObject(val);\n      return;\n    }\n    if (!isUndefined(config1[key])) {\n      config[key] = mergeObject(config1[key]);\n    }\n  }\n\n  /**\n   * config2中key就用config2，没有就用config1\n   * @param key\n   */\n  function getDirectValue(key: string): void {\n    if (key in config2) {\n      config[key] = mergeObject(config2[key]);\n      return;\n    }\n    if (key in config1) {\n      config[key] = mergeObject(config1[key]);\n    }\n  }\n\n  function deepMergeConfig(key: string): void {\n    const val1 = config1[key];\n    const val2 = config2[key];\n    // 如果两个config1和config2都有值，那么合并两个值\n    if (!isUndefined(val2)) {\n      config[key] = getMergeValue(val1, val2);\n      return;\n    }\n\n    if (!isUndefined(val1)) {\n      config[key] = getMergeValue(undefined, val1);\n    }\n  }\n\n  function getMergeValue(target: any, source: any): any {\n    if (isPlainObject(target) && isPlainObject(source)) {\n      return merge(target, source);\n    }\n\n    if (isPlainObject(source)) {\n      return merge({}, source);\n    }\n\n    return mergeObject(source);\n  }\n\n  function mergeObject(val: any): any {\n    if (Array.isArray(val)) {\n      return merge(val);\n    }\n    if (isPlainObject(val)) {\n      return merge(val);\n    }\n    return val;\n  }\n\n  const hadMergeKeys = valueFromConfig2Keys\n    .concat(requiredMergeDeepPropertiesKeys)\n    .concat(directMergeKeys)\n    .concat(requiredMergeDeepPropertiesKeys);\n\n  const remainKeys = Object.keys(config1)\n    .concat(Object.keys(config2))\n    .filter((key) => !hadMergeKeys.includes(key));\n\n  forEach(remainKeys, deepMergeConfig);\n\n  return config;\n}\n","import { isPlainObject, isString, merge } from \"../../helpers/utils\";\n\nconst STORAGE_COOKIES_KEY = \"miniRequest:cookies\";\n\nexport default function storageCookies(cookies: Record<string, string> | undefined): void {\n  if (!cookies || !isPlainObject(cookies)) {\n    return;\n  }\n  try {\n    const cacheCookies = wx.getStorageSync(STORAGE_COOKIES_KEY);\n    wx.setStorageSync(STORAGE_COOKIES_KEY, merge(cacheCookies, cookies));\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nexport function getCookie(cookieName: string | undefined): string {\n  try {\n    const cacheCookies = wx.getStorageSync(STORAGE_COOKIES_KEY);\n    if (!cacheCookies || !cookieName || !isString(cacheCookies[cookieName])) {\n      return \"\";\n    }\n\n    return cacheCookies[cookieName];\n  } catch (e) {\n    console.error(e);\n    return \"\";\n  }\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-01-31 11:14:33\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-08 16:50:27\n * @Description 处理请求headers和处理响应headers\n */\n\nimport { getCookie } from \"../adapters/wx/storageCookies\";\nimport { isPlainObject, isString, merge } from \"./utils\";\n\n/**\n * 格式化请求头中key的格式\n * @param headers 请求头数据\n * @param normalizedNames 标准的请求头key值，如：[\"Content-Type\"]\n * @example\n * // Returns {\"Content-Type\", \"plain/text\"}\n * formatterHeader({\"content-type\": \"plain/text\"}, [\"Content-Type\"]);\n * @returns {Object} 返回标准化的请求头数据\n */\nexport function formattedHeader(\n  headers: any,\n  normalizedNames: string[]\n): Record<string, string> {\n  const normalizedHeaders: Record<string, string> = {};\n  if (!isPlainObject(headers)) {\n    return normalizedHeaders;\n  }\n\n  if (normalizedNames.length === 0) {\n    return headers;\n  }\n\n  const headerUpperKeyMapping: Record<string, string> = {};\n  normalizedNames.forEach((key) => {\n    headerUpperKeyMapping[key.toUpperCase()] = key;\n  });\n\n  Object.keys(headers).forEach((header) => {\n    const upperHeader = header.toUpperCase();\n    const normalizedKey = headerUpperKeyMapping[upperHeader];\n    normalizedHeaders[normalizedKey || header] = headers[header];\n  });\n\n  return normalizedHeaders;\n}\n\n/**\n * 先将headers的key标准化处理，如果未设置Content-Type的，根据传输的数据类型，设置Content-Type的值\n * @param headers 请求头\n * @param data 请求body体中的数据\n * @example\n * // return {\"Content-Type\": \"application/json; charset=utf-8\"}\n * assembleReqHeaders({}, {username: \"tome\"});\n * @returns {Record<string, string>}\n */\nexport default function assembleReqHeaders(\n  headers: any,\n  data: IAppletsRequest.IDataType | undefined\n): Record<string, string> {\n  const reqHeaders = formattedHeader(Object.assign(headers || {}), [\n    \"Content-Type\",\n  ]);\n\n  if (isPlainObject(data) && !reqHeaders[\"Content-Type\"]) {\n    reqHeaders[\"Content-Type\"] = \"application/json; charset=utf-8\";\n  }\n\n  if (data === null || typeof data === \"undefined\") {\n    delete reqHeaders[\"Content-Type\"];\n  }\n\n  return reqHeaders;\n}\n\n/**\n * 合并headers中【headers.common】[headers[method]】数据，删除不需要的默认属性\n * @param headers 请求头数据\n * @param method 请求method\n * @example\n * // Return {\"Content-Type\": \"plain/text\", \"Accept\": \"*\"}\n * filterHeaders({\n *   common: {\n *     \"Content-Type\": \"plain/text\"\n *   },\n *   post: {\n *     \"Accept\": \"*\"\n *   }\n * }, \"post\");\n * @returns {Record<string, any>} 返回完整可用的headers\n *\n * {\"Content-Type\": \"plain/text\", \"Accept\": \"*\"}\n */\nexport function filterHeaders(\n  headers: Record<string, any> | undefined,\n  method: string\n): Record<string, any> {\n  if (!headers) {\n    return {};\n  }\n\n  const mergedHeaders: Record<string, any> = merge(\n    headers.common,\n    headers[method.toLowerCase()],\n    headers\n  );\n\n  [\n    \"delete\",\n    \"get\",\n    \"post\",\n    \"head\",\n    \"patch\",\n    \"put\",\n    \"options\",\n    \"common\",\n  ].forEach((deleteMethod) => {\n    delete mergedHeaders[deleteMethod];\n  });\n\n  return mergedHeaders;\n}\n\n/**\n * 和原有的cookie string拼接成新的cookie string\n * @param cookiesString header中已存在的cookie string\n * @param cookieName 需要新加入的cookie keyName\n * @example\n * // return token=tokenString; username=tom\n * combineCookieStr(\"token=tokenString\", \"username\");\n * @returns {string} 拼接后的cookie string\n */\nexport function combineCookiesStr(\n  cookiesString: string | undefined,\n  cookieName: string | undefined\n): any {\n  if (!cookieName && String(cookieName) !== String(0)) {\n    return cookiesString;\n  }\n\n  const cookieVal = getCookie(cookieName);\n\n  if (!isString(cookiesString)) {\n    return !cookieVal && String(cookieVal) !== \"0\"\n      ? cookieName\n      : `${spliceCookieStr(cookieName as string, cookieVal)}`;\n  }\n  return `${cookiesString}; ${spliceCookieStr(\n    cookieName as string,\n    cookieVal\n  )}`;\n}\n\nfunction spliceCookieStr(cookieName: string, cookieVal: any): string {\n  return !cookieVal && String(cookieVal) !== \"0\"\n    ? cookieName\n    : `${cookieName}=${cookieVal}`;\n}\n","export default function transformMethod(\n  method?: IAppletsRequest.IMethod | undefined\n): IAppletsRequest.INormalizeMethod {\n  if (!method || typeof method !== \"string\") {\n    return \"GET\";\n  }\n  return method.toUpperCase() as IAppletsRequest.INormalizeMethod;\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-02 18:16:24\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-08 13:39:12\n * @Description 创建副本，避免引用类型影响\n */\n\nimport { merge } from \"./utils\";\n\nexport default function copyConfig(\n  config: IAppletsRequestConfig | undefined | null\n): IAppletsRequestConfig {\n  if (!config) {\n    return {};\n  }\n  if (Array.isArray(config)) {\n    return merge([], config);\n  }\n\n  return merge({}, config) as IAppletsRequestConfig;\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-02 18:26:33\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-06 22:02:36\n * @Description 执行transform config，并且转换成对应环境的配置文件\n */\n\nimport copyConfig from \"../helpers/copyConfig\";\nimport { forEach } from \"../helpers/utils\";\n\nexport default function transformConfig(\n  config: IAppletsRequestConfig,\n  fns: IAppletsRequestConfig[\"transformConfig\"]\n): IAppletsRequestConfig {\n  let formattedConfig = config;\n\n  forEach(fns, (fn) => {\n    if (typeof fn === \"function\") {\n      formattedConfig = fn(config);\n    }\n  });\n\n  return copyConfig(formattedConfig);\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-02 17:57:28\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-05 23:11:21\n * @Description transformRequest和transformResponse辅助函数\n */\n\nimport { forEach } from \"../helpers/utils\";\n\nexport type ITransformer =\n  | IAppletsRequest.ITransformer\n  | IAppletsRequest.ITransformer[];\n\nexport default function transformData(\n  data: any,\n  headers: any,\n  fns: ITransformer | undefined,\n): IAppletsRequest.IDataType {\n  let formattedData = data;\n\n  forEach(fns, (fn) => {\n    if (typeof fn === \"function\") {\n      formattedData = fn(data, headers);\n    }\n  });\n\n  return formattedData;\n}\n","export default function isURLSameOrigin(): boolean {\n  return true;\n}\n","import { isUndefined } from \"./utils\";\n\n/**\n * Module variables.\n * @private\n */\n\nconst decode = decodeURIComponent;\nconst encode = encodeURIComponent;\nconst pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\n// eslint-disable-next-line no-control-regex\nconst fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n *\n * @param {string} cookiesStr cookies字符串\n * @param options\n */\nexport default function parseCookies(\n  cookiesStr: any,\n  options: any = {}\n): Record<string, string> {\n  if (!cookiesStr) {\n    return {};\n  }\n\n  return parse(cookiesStr, options);\n}\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(cookiesStr: string, options: any = {}): Record<string, string> {\n  if (typeof cookiesStr !== \"string\") {\n    return {};\n  }\n\n  const cookies: Record<string, string> = {};\n  const pairs = cookiesStr.split(pairSplitRegExp);\n  const decodeFn = options.decode || decode;\n\n  pairs.forEach((pair: string) => {\n    const qeInd = pair.indexOf(\"=\");\n    if (qeInd < 0) {\n      return;\n    }\n\n    const key = pair.substr(0, qeInd).trim();\n    let val = pair.substr(qeInd + 1, pair.length).trim();\n\n    // 如果val是含有“”的字符串，则删除“”\n    if (val[0] === '\"') {\n      val = val.slice(1, -1);\n    }\n\n    if (isUndefined(cookies[key])) {\n      cookies[key] = tryDecode(val, decodeFn);\n    }\n  });\n\n  return cookies;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\nexport function serializeCookie(\n  name: string,\n  val: string,\n  options: any = {}\n): string {\n  const encodeFn = options.encode || encode;\n\n  serializeThrowErr(typeof encodeFn !== \"function\", \"option encode is invalid\");\n  serializeThrowErr(!regPass(name), \"argument name is invalid\");\n\n  const value = encodeFn(val);\n\n  serializeThrowErr(!regPass(value), \"argument val is invalid\");\n\n  let str = `${name}=${value}`;\n\n  if (options.maxAge || options.maxAge === 0) {\n    const maxAge = options.maxAge - 0;\n\n    serializeThrowErr(\n      Number.isNaN(maxAge) || !Number.isFinite(maxAge),\n      \"option maxAge is invalid\"\n    );\n\n    str += `; Max-Age=${Math.floor(maxAge)}`;\n  }\n\n  if (options.domain) {\n    serializeThrowErr(!regPass(options.domain), \"option domain is invalid\");\n\n    str += `; Domain=${options.domain}`;\n  }\n\n  if (options.path) {\n    serializeThrowErr(!regPass(options.path), \"option path is invalid\");\n\n    str += `; Path=${options.path}`;\n  }\n\n  if (options.expires) {\n    serializeThrowErr(\n      typeof options.expires.toUTCString !== \"function\",\n      \"option expires is invalid\"\n    );\n\n    str += `; Expires=${options.expires.toUTCString()}`;\n  }\n\n  if (options.httpOnly) {\n    str += \"; HttpOnly\";\n  }\n\n  if (options.secure) {\n    str += \"; Secure\";\n  }\n\n  if (options.sameSite) {\n    str += getSameSiteCookieStr(options.sameSite);\n  }\n\n  return str;\n}\n\nfunction getSameSiteCookieStr(sameSite: string | boolean): string {\n  const tmpSameSite =\n    typeof sameSite === \"string\" ? sameSite.toLowerCase() : sameSite;\n\n  if (tmpSameSite === true || tmpSameSite === \"strict\") {\n    return \"; SameSite=Strict\";\n  }\n\n  if (tmpSameSite === \"lax\") {\n    return \"; SameSite=Lax\";\n  }\n\n  if (tmpSameSite === \"none\") {\n    return \"; SameSite=None\";\n  }\n\n  throw new TypeError(\"option sameSite is invalid\");\n}\n\nfunction serializeThrowErr(isErr: boolean, errMsg: string): never | void {\n  if (!isErr) {\n    return;\n  }\n  throw new TypeError(errMsg);\n}\n\nfunction regPass(data: any): boolean {\n  return Boolean(data) && fieldContentRegExp.test(data);\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str: string, decodeFn: any): string {\n  try {\n    return decodeFn(str);\n  } catch (e) {\n    return str;\n  }\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-01-31 21:52:37\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-05 23:14:19\n * @Description 处理错误\n */\n\nexport default class AppletsRequestError {\n  errMsg: string;\n\n  config: IAppletsRequest.IHttpConfig;\n\n  status: IAppletsRequestStatus;\n\n  response: IAppletsRequestResponse | undefined;\n\n  extra = null;\n\n  constructor(\n    message: string,\n    config: IAppletsRequest.IHttpConfig,\n    status: IAppletsRequestStatus,\n    response: IAppletsRequestResponse | undefined,\n    extra?: any,\n  ) {\n    // super(message);\n\n    this.errMsg = message;\n    this.config = config;\n    this.status = status;\n    this.response = response;\n    this.extra = extra;\n\n    // Object.setPrototypeOf(this, AppletsRequestError.prototype);\n  }\n}\n\nexport function createError(\n  message: string,\n  config: IAppletsRequest.IHttpConfig,\n  status: IAppletsRequestStatus,\n  response: IAppletsRequestResponse | undefined,\n  extra?: any,\n): AppletsRequestError {\n  const tmpStatus = !status && status !== 0 ? \"NETWORK_ERROR\" : status;\n\n  return new AppletsRequestError(message, config, tmpStatus, response, extra);\n}\n","/* eslint-disable max-len */\n/*\n * @Author: youzhao.zhou\n * @Date: 2021-02-05 14:31:47\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-02-09 16:54:10\n * @Description http request adapter\n * 1. 自定义请求适配器接口规范\n * 2. 执行成功需要调用resolve\n * 3. 执行失败需要调用reject\n * 4. 监听用户取消时间执行abort\n *\n * @example:\n * 1. 创建实例：const adapter = new Adapter(config);\n * 2. 请求成功：adapter.resolve({headers: any, status: 200, data: {}, response: any}, resolve);\n * 3. 请求失败：adapter.reject({errMsg: \"Request Timeout\", status: \"TIMEOUT\", data: any, extra: any}, reject);\n * 4. 监听用户取消行为：adapter.abort((reason) => {\n *    // do something\n *    reject(reason);\n * });\n */\nimport { isUndefined } from \"../helpers/utils\";\n\nexport interface IResolveOptions {\n  headers: Record<string, any>;\n  status: number;\n  data: any;\n  response?: any;\n}\n\nexport default class Adapter {\n  private reqConfig: IAppletsRequest.IHttpConfig;\n\n  constructor(config: IAppletsRequest.IHttpConfig) {\n    this.reqConfig = config;\n  }\n\n  /**\n   * 接口请求成功执行该方法\n   * @param options response数据\n   * @param resolve Promise.resolve\n   */\n  resolve(\n    options: IAppletsRequest.IAdapterResolveOptions,\n    resolve: IAppletsRequest.IResolved<any>\n  ): void {\n    if (isUndefined(options) || options === null) {\n      resolve({\n        headers: {},\n        status: 200,\n        data: {},\n        config: this.reqConfig,\n        originalRes: null,\n      });\n    }\n\n    resolve({\n      headers: options.headers,\n      config: this.reqConfig,\n      data: options.data,\n      status: options.status,\n      originalRes: isUndefined(options.response) ? null : options.response,\n    });\n  }\n\n  /**\n   * 接口请求失败执行该方法\n   * @param options response数据\n   * @param reject Promise.reject\n   */\n  reject(options: IAppletsRequest.IAdapterRejectOptions, reject: IAppletsRequest.IRejected): void {\n    if (isUndefined(options) || options === null) {\n      reject({\n        status: \"NETWORK_ERROR\",\n        errMsg: \"Reject arguments Error\",\n        config: this.reqConfig,\n        extra: null,\n      });\n    }\n\n    reject({\n      config: this.reqConfig,\n      status: options.status,\n      data: options.data,\n      errMsg: options.errMsg,\n      extra: isUndefined(options.extra) ? null : options.extra,\n    });\n  }\n\n  /**\n   * 取消接口请求\n   * @param executor 监听执行取消接口请求操作的监听函数\n   */\n  cancel(executor: (cancel: IAppletsRequest.ICanceler) => void): void {\n    if (!this.reqConfig.cancelToken) {\n      return;\n    }\n\n    this.reqConfig.cancelToken.execAbort((reason) => {\n      executor(reason);\n    });\n  }\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport assembleReqHeaders, {\n  combineCookiesStr,\n  filterHeaders,\n  formattedHeader,\n} from \"../helpers/assembleHeaders\";\nimport transformMethod from \"../helpers/transformMethod\";\nimport transformUrl from \"../helpers/transformUrl\";\nimport transformConfig from \"./transformConfig\";\nimport transformData from \"./transformData\";\nimport isCancel from \"../cancel/isCancel\";\nimport isURLSameOrigin from \"../helpers/isURLSameOrigin\";\nimport storageCookies, { getCookie } from \"../adapters/wx/storageCookies\";\nimport { isPlainObject } from \"../helpers/utils\";\nimport parseCookies from \"../helpers/parseCookie\";\nimport { createError } from \"./AppletsRequestError\";\nimport combineURLs from \"../helpers/combineURLs\";\nimport isAbsoluteURL from \"../helpers/isAbsoluteURL\";\nimport Adapter from \"../adapters/Adapter\";\n\nasync function request(\n  config: IAppletsRequestConfig\n): Promise<IAppletsRequestResponse> {\n  const transformedConfig = formattedConfig(config);\n\n  try {\n    const res = await config.adapter!(transformedConfig);\n\n    throwIfCancellationRequested(transformedConfig);\n\n    if (isPlainObject(res.headers)) {\n      res.cookies = parseCookies(\n        formattedHeader(res.headers, [\"Set-Cookie\"])[\"Set-Cookie\"]\n      );\n    }\n\n    if (config.autoCookies) {\n      storageCookies(res.cookies);\n    }\n\n    if (\n      typeof config.validateStatus === \"function\" &&\n      config.validateStatus(res.status)\n    ) {\n      res.data = transformData(\n        res.data,\n        res.headers,\n        transformedConfig.transformResponse\n      );\n\n      return res;\n    }\n\n    return Promise.reject(\n      createError(\n        `Request failed with status code ${res.status}`,\n        res.config,\n        res.status,\n        res\n      )\n    );\n  } catch (reason) {\n    if (isCancel(reason)) {\n      return Promise.reject(reason);\n    }\n\n    throwIfCancellationRequested(transformedConfig);\n\n    const err = reason as IAppletsRequestRejectData;\n\n    if (err && err.response) {\n      err.response.data = transformData(\n        err.response.data,\n        err.response.headers,\n        transformedConfig.transformResponse\n      );\n    }\n\n    return Promise.reject(\n      createError(err.errMsg, err.config, err.status, err.response, err.extra)\n    );\n  }\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config: IAppletsRequestConfig): void {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\nfunction formattedConfig(\n  config: IAppletsRequestConfig\n): IAppletsRequest.IHttpConfig {\n  throwIfCancellationRequested(config);\n\n  const { baseURL, url, params } = config;\n  const combinedURL = isAbsoluteURL(url) ? url : combineURLs(baseURL, url!);\n  const formattedUrl = transformUrl(\n    combinedURL!,\n    params,\n    config.paramsSerializer\n  );\n  const method = transformMethod(config.method);\n\n  let transformedConfig: IAppletsRequestConfig = {\n    ...config,\n    // 过滤headers中无用的配置\n    headers: filterHeaders(config.headers, method),\n  };\n\n  // 先执行data转换\n  transformedConfig.data = transformData(\n    transformedConfig.data,\n    transformedConfig.headers,\n    transformedConfig.transformRequest\n  );\n\n  transformedConfig.headers = assembleReqHeaders(\n    transformedConfig.headers,\n    transformedConfig.data\n  );\n\n  // 后执行config转换，最后返回config副本，避免引用类型导致数据混乱问题\n  transformedConfig = transformConfig(\n    transformedConfig,\n    config.transformConfig\n  );\n\n  // 添加Cookie头\n  const cookiesStr = getCookiesStr(transformedConfig);\n  if (cookiesStr) {\n    transformedConfig.headers!.Cookies = cookiesStr;\n  }\n\n  // xsrf 防御\n  const xsrfToken = getCookie(transformedConfig.xsrfCookieName);\n  if (xsrfToken) {\n    transformedConfig.headers![transformedConfig.xsrfHeaderName!] = xsrfToken;\n  }\n\n  return {\n    ...transformedConfig,\n    url: formattedUrl,\n    method,\n    headers: transformedConfig.headers as Record<string, string>,\n    getRequestTask: formattedGetRequestTaskFunction(\n      transformedConfig.getRequestTask\n    ),\n    Adapter,\n  };\n}\n\nfunction formattedGetRequestTaskFunction(fn: any): () => any {\n  if (typeof fn === \"function\") {\n    return fn;\n  }\n  return (): void => {\n    // empty\n  };\n}\n\nfunction getCookiesStr(config: IAppletsRequestConfig): string {\n  if (config.withCredentials || isURLSameOrigin()) {\n    return combineCookiesStr(\n      config.headers!.Cookies as string,\n      config.xsrfCookieName\n    );\n  }\n  return \"\";\n}\n\nexport default request;\n","import CancelToken from \"../cancel/CancelToken\";\nimport isCancel from \"../cancel/isCancel\";\nimport defaults from \"../defaults\";\nimport isNetworkError from \"../error/isNetworkError\";\nimport isTimeout from \"../error/isTimeout\";\nimport combineURLs from \"../helpers/combineURLs\";\nimport isAbsoluteURL from \"../helpers/isAbsoluteURL\";\nimport transformUrl from \"../helpers/transformUrl\";\nimport { assign, isPlainObject } from \"../helpers/utils\";\nimport InterceptorManager from \"./InterceptorManager\";\nimport mergeConfig from \"./mergeConfig\";\nimport request from \"./request\";\n\ninterface IInterceptors {\n  request: InterceptorManager<IAppletsRequestConfig>;\n  response: InterceptorManager<IAppletsRequestResponse>;\n}\n\ninterface IPromiseChain<T> {\n  fulfilled:\n    | IAppletsRequest.IResolved<T>\n    | ((config: IAppletsRequestConfig) => IAppletsRequestPromise);\n  rejected?: IAppletsRequest.IRejected;\n}\n\nexport default class AppletsRequest {\n  AppletsRequest = AppletsRequest;\n\n  CancelToken = CancelToken;\n\n  isCancel = isCancel;\n\n  defaults: IAppletsRequestConfig = {};\n\n  interceptors: IInterceptors;\n\n  constructor(config?: IAppletsRequestConfig) {\n    if (config) {\n      this.defaults = config;\n    }\n\n    this.interceptors = {\n      request: new InterceptorManager<IAppletsRequestConfig>(),\n      response: new InterceptorManager<IAppletsRequestResponse>(),\n    };\n  }\n\n  request(\n    options: string | IAppletsRequestConfig,\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestPromise {\n    let formattedConfig: IAppletsRequestConfig = {};\n    if (typeof options === \"string\") {\n      formattedConfig = this.transformConfig(config);\n      formattedConfig.url = options;\n    } else {\n      formattedConfig = options;\n    }\n\n    formattedConfig = mergeConfig(this.defaults, formattedConfig);\n\n    const chain: IPromiseChain<any>[] = [\n      {\n        fulfilled: request,\n        rejected: undefined,\n      },\n    ];\n\n    this.interceptors.request.forEach(\n      (interceptor) =>\n        // eslint-disable-next-line implicit-arrow-linebreak\n        chain.unshift(interceptor)\n      // eslint-disable-next-line function-paren-newline\n    );\n\n    this.interceptors.response.forEach(\n      (interceptor) =>\n        // eslint-disable-next-line implicit-arrow-linebreak\n        chain.push(interceptor)\n      // eslint-disable-next-line function-paren-newline\n    );\n\n    let promise = Promise.resolve(formattedConfig);\n\n    chain.forEach((interceptor) => {\n      if (!interceptor) {\n        return;\n      }\n      promise = promise.then(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    return promise as IAppletsRequestPromise;\n  }\n\n  get(url: string, config?: IAppletsRequestConfig): IAppletsRequestPromise {\n    return this.requestWithMethod(url, \"GET\", config);\n  }\n\n  delete(url: string, config?: IAppletsRequestConfig): IAppletsRequestPromise {\n    return this.requestWithMethod(url, \"DELETE\", config);\n  }\n\n  head(url: string, config?: IAppletsRequestConfig): IAppletsRequestPromise {\n    return this.requestWithMethod(url, \"HEAD\", config);\n  }\n\n  options(url: string, config?: IAppletsRequestConfig): IAppletsRequestPromise {\n    return this.requestWithMethod(url, \"OPTIONS\", config);\n  }\n\n  post(\n    url: string,\n    data?: IAppletsRequest.IDataType,\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestPromise {\n    return this.requestWithData(url, \"POST\", data, config);\n  }\n\n  put(\n    url: string,\n    data?: IAppletsRequest.IDataType,\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestPromise {\n    return this.requestWithData(url, \"PUT\", data, config);\n  }\n\n  create(config?: IAppletsRequestConfig): AppletsRequestInstance {\n    const miniRequest = new AppletsRequest(mergeConfig(defaults, config));\n    const ins: AppletsRequestInstance = AppletsRequest.prototype.request.bind(\n      miniRequest\n    ) as AppletsRequestInstance;\n\n    return assign(ins, miniRequest);\n  }\n\n  all(promises: IAppletsRequestPromise[]): Promise<IAppletsRequestResponse[]> {\n    if (promises.length === 0) {\n      throw new TypeError(`arguments length is 0`);\n    }\n    return Promise.all(promises);\n  }\n\n  getUri(config: IAppletsRequestConfig): string {\n    const { url, baseURL, params } = config;\n    const tmpUrl = url || \"\";\n    const combinedURL = isAbsoluteURL(tmpUrl)\n      ? tmpUrl\n      : combineURLs(baseURL || \"\", tmpUrl);\n    const formattedUrl = transformUrl(\n      combinedURL,\n      params,\n      config.paramsSerializer\n    );\n    return formattedUrl;\n  }\n\n  isTimeout = isTimeout;\n\n  isNetworkError = isNetworkError;\n\n  private requestWithMethod(\n    url: string,\n    method: IAppletsRequest.IMethod,\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestPromise {\n    return this.request({\n      ...this.transformConfig(config),\n      url,\n      method,\n    });\n  }\n\n  private requestWithData(\n    url: string,\n    method: IAppletsRequest.IMethod,\n    data?: IAppletsRequest.IDataType,\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestPromise {\n    return this.requestWithMethod(url, method, {\n      ...this.transformConfig(config),\n      data,\n    });\n  }\n\n  private transformConfig(\n    config?: IAppletsRequestConfig\n  ): IAppletsRequestConfig {\n    return isPlainObject(config) ? config : {};\n  }\n}\n","import AppletsRequest from \"./core/AppletsRequest\";\n\n/**\n * 创建AppletsRequest实例\n * @param {IAppletsRequestConfig} config\n */\nexport function createAppletsRequestInstance(\n  config?: IAppletsRequestConfig\n): AppletsRequestInstance {\n  const request = new AppletsRequest(config);\n\n  return request.create(config);\n}\n\n/**\n * 默认miniRequest\n */\nconst miniRequest = createAppletsRequestInstance();\n\nexport default miniRequest;\n\nexport { AppletsRequest as AppletsRequest };\n"],"names":["wxRequest"],"mappings":"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"}